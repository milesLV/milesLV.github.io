{"title":"Housing Status Changes in Substance Abuse Treatment","markdown":{"yaml":{"title":"Housing Status Changes in Substance Abuse Treatment","author":"Miles Libbey V","image":"capstoneIcon.png","categories":["University","R","Python"],"format":"html"},"headingText":"CatboostClassifier","containsRefs":false,"markdown":"\n\nThis project was a one of 3 subsets of a larger project done for the Senior Capstone class *Projects In Data Science* aimed at analyzing SAMHSA's TEDS-D (Treatment Episodic Data Set-Discharges) 2021 file in seeing how vital quality of life influences– employment status, housing status, and frequency of substance use– changed throughout the time substance abuse facility clients' stay. This was accomplished from use of 2 time interval variables measuring the same aspect. For example, EMPLOY and EMPLOY_D measured employment at admission and employment at departure respectively.\n\nSpecifically, this project set out to answer the question, **What are the key differences in the characteristics of people whose living arrangements do or do Not change after treatment?** In order to provide evidence, it dove into what the composite differences were between those who remained unhoused and those who went from being unhoused to living independently (with a slight interest in looking at those who came in living independently and became unhoused, only 0.6% of clients). This was all done in R, with some use of Python for running models unavailable in R (CatBoost and retreiving the SHAP values of those).\n\n-   Build story\n\n    -   Give context of project\n\n-   Include models / key visuals\n\n    -   CatBoost + SHAP\n\n        -   Brief why CatBoost and what they both show\n\n    -   MCA + biplots (maybe just exclude a couple of less meaningful variables for legibility)\n\n![](basicAdmissionPlot.png){.lightbox fig-align=\"center\" width=\"347\"}\n\n![](capstoneIcon.png){.lightbox fig-align=\"center\" width=\"600\"}\n\n\nCatBoost is a gradient boosting model (like LightGM and XGBoost) that has a special CatBoost target encoding that makes it shine above the others for this project. Its unique target encoding allows for more effective and efficient predictions with categorical data, which is the datatype of 97% of the columns.\n\n``` python\nX = teds_Unhoused.drop(columns=[\"LIVARAG_delta\"]) \nX = X.astype(str)\ny = teds_Unhoused[\"LIVARAG_delta\"] \n\ntrain_pool = Pool(X, label=y, cat_features=X.columns.tolist())\n\nmodelUnhoused = CatBoostClassifier(iterations=700, \n                           depth=8, \n                           learning_rate=0.2, \n                           loss_function='Logloss', \n                           eval_metric='AUC', \n                           verbose=70)\n\nmodelUnhoused.fit(train_pool)\n```\n\n![](images/catBoostMeasures.png){.lightbox fig-align=\"center\" width=\"269\"}\n\n![](images/unhousedMatrix.png){.lightbox fig-align=\"center\" width=\"428\"}\n\n### Shap Values\n\n![SHAP values give a little insight into how variables actually sway the classifier's decision. In this plot, every dot is representative of one case, or one client. The further right a dot is, the higher probability of the client changing from unhoused to house is and vice versa. Since every dot is a single person, those humps are all people, so it is easy to spot that there are many groups in the variables. What is important to see is that there is a trend for these variables to leaning towards the right, with many large humps and tails being there. However, these variables aren't just univariate and some have good sized humps on the left like in the case of State and Length of Stay. The next model gives insight into which models are more likely to be doing this.](images/SHAPValues.png){.lightbox fig-align=\"center\" width=\"427\"}\n\n![](images/MCABiplot-01.png){.lightbox fig-align=\"center\" width=\"636\"}\n\n\\- Include thank you's to experts\n\n### Works Cited\n\nBrubaker, Michael D., et al. “Barriers and Supports to Substance Abuse Service Use among Homeless Adults.” Journal of Addictions & Offender Counseling, vol. 34, no. 2, Oct. 2013, pp. 81–98, [https://doi.org/10.1002/j.2161-1874.2013.00017.x.](https://doi.org/10.1002/j.2161-1874.2013.00017.x) Accessed 24 October. 2024.\n\nNicholls, Melanie J., and Lianne A. Urada. “Homelessness and Polysubstance Use: A Qualitative Study on Recovery and Treatment Access Solutions around an Urban Library in Southern California, USA.” Health & Social Care in the Community, vol. 30, no. 1, 14 May 2021, <https://doi.org/10.1111/hsc.13424>.\n\nSubstance Abuse and Mental Health Services Administration. (2023). Treatment Episode Data\n\nSet Discharges (TEDS-D) 2021: Public Use File (PUF) Codebook. Rockville, MD: Center for Behavioral Health Statistics and Quality, Substance Abuse and Mental Health Services Administration. Retrieved from <https://www.samhsa.gov/data/>.\n","srcMarkdownNoYaml":"\n\nThis project was a one of 3 subsets of a larger project done for the Senior Capstone class *Projects In Data Science* aimed at analyzing SAMHSA's TEDS-D (Treatment Episodic Data Set-Discharges) 2021 file in seeing how vital quality of life influences– employment status, housing status, and frequency of substance use– changed throughout the time substance abuse facility clients' stay. This was accomplished from use of 2 time interval variables measuring the same aspect. For example, EMPLOY and EMPLOY_D measured employment at admission and employment at departure respectively.\n\nSpecifically, this project set out to answer the question, **What are the key differences in the characteristics of people whose living arrangements do or do Not change after treatment?** In order to provide evidence, it dove into what the composite differences were between those who remained unhoused and those who went from being unhoused to living independently (with a slight interest in looking at those who came in living independently and became unhoused, only 0.6% of clients). This was all done in R, with some use of Python for running models unavailable in R (CatBoost and retreiving the SHAP values of those).\n\n-   Build story\n\n    -   Give context of project\n\n-   Include models / key visuals\n\n    -   CatBoost + SHAP\n\n        -   Brief why CatBoost and what they both show\n\n    -   MCA + biplots (maybe just exclude a couple of less meaningful variables for legibility)\n\n![](basicAdmissionPlot.png){.lightbox fig-align=\"center\" width=\"347\"}\n\n![](capstoneIcon.png){.lightbox fig-align=\"center\" width=\"600\"}\n\n## CatboostClassifier\n\nCatBoost is a gradient boosting model (like LightGM and XGBoost) that has a special CatBoost target encoding that makes it shine above the others for this project. Its unique target encoding allows for more effective and efficient predictions with categorical data, which is the datatype of 97% of the columns.\n\n``` python\nX = teds_Unhoused.drop(columns=[\"LIVARAG_delta\"]) \nX = X.astype(str)\ny = teds_Unhoused[\"LIVARAG_delta\"] \n\ntrain_pool = Pool(X, label=y, cat_features=X.columns.tolist())\n\nmodelUnhoused = CatBoostClassifier(iterations=700, \n                           depth=8, \n                           learning_rate=0.2, \n                           loss_function='Logloss', \n                           eval_metric='AUC', \n                           verbose=70)\n\nmodelUnhoused.fit(train_pool)\n```\n\n![](images/catBoostMeasures.png){.lightbox fig-align=\"center\" width=\"269\"}\n\n![](images/unhousedMatrix.png){.lightbox fig-align=\"center\" width=\"428\"}\n\n### Shap Values\n\n![SHAP values give a little insight into how variables actually sway the classifier's decision. In this plot, every dot is representative of one case, or one client. The further right a dot is, the higher probability of the client changing from unhoused to house is and vice versa. Since every dot is a single person, those humps are all people, so it is easy to spot that there are many groups in the variables. What is important to see is that there is a trend for these variables to leaning towards the right, with many large humps and tails being there. However, these variables aren't just univariate and some have good sized humps on the left like in the case of State and Length of Stay. The next model gives insight into which models are more likely to be doing this.](images/SHAPValues.png){.lightbox fig-align=\"center\" width=\"427\"}\n\n![](images/MCABiplot-01.png){.lightbox fig-align=\"center\" width=\"636\"}\n\n\\- Include thank you's to experts\n\n### Works Cited\n\nBrubaker, Michael D., et al. “Barriers and Supports to Substance Abuse Service Use among Homeless Adults.” Journal of Addictions & Offender Counseling, vol. 34, no. 2, Oct. 2013, pp. 81–98, [https://doi.org/10.1002/j.2161-1874.2013.00017.x.](https://doi.org/10.1002/j.2161-1874.2013.00017.x) Accessed 24 October. 2024.\n\nNicholls, Melanie J., and Lianne A. Urada. “Homelessness and Polysubstance Use: A Qualitative Study on Recovery and Treatment Access Solutions around an Urban Library in Southern California, USA.” Health & Social Care in the Community, vol. 30, no. 1, 14 May 2021, <https://doi.org/10.1111/hsc.13424>.\n\nSubstance Abuse and Mental Health Services Administration. (2023). Treatment Episode Data\n\nSet Discharges (TEDS-D) 2021: Public Use File (PUF) Codebook. Rockville, MD: Center for Behavioral Health Statistics and Quality, Substance Abuse and Mental Health Services Administration. Retrieved from <https://www.samhsa.gov/data/>.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.57","resources":["../../Miles_LibbeyV_Resume_2025.pdf"],"editor":"source","theme":"lumen","page-layout":"article","page-footer":{"left":"&copy; [name], 2025<br>\nAll content licensed under <i class='bi-badge-cc'></i>\n[(CC BY-NC-SA 4.0)](http://creativecommons.org/licenses/by-nc-sa/4.0/)\n","right":"Site built with <a href='https://quarto.org/'>Quarto</a>\n"},"title":"Housing Status Changes in Substance Abuse Treatment","author":"Miles Libbey V","image":"capstoneIcon.png","categories":["University","R","Python"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}